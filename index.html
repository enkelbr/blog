<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Enkel Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Enkel Blog">
<meta property="og:url" content="https://blog.enkel.com.br/index.html">
<meta property="og:site_name" content="Enkel Blog">
<meta property="og:locale" content="pt">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Enkel Blog">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Enkel Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.enkel.com.br"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Deploy_Checker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/06/Deploy_Checker/" class="article-date">
  <time datetime="2020-07-06T16:58:57.000Z" itemprop="datePublished">2020-07-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/06/Deploy_Checker/">Smiles - Controlando os deploy em produção com AWS e Slack</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​<br>A <a href="https://www.smiles.com.br" target="_blank" rel="noopener">Smiles</a> apresentou a necessidade de que, todo e qualquer deploy que fosse realizado em seu ambiente produtivo, fosse devidamente aprovado por algum responsável adicional, que não o seu executor, para fins de maior controle e governança do ambiente.</p>
<p>Para isso foi necessário o desenvolvimento de um mecanismo de fácil manutenção e simples de operar, foi aí que desenvolvemos um sistema usando API Gateway, Lambda e com banco em DynamoDB, enviando mensagem no Slack do cliente com opções de aprovação de execuções.<br>​</p>
<h3 id="Cliente"><a href="#Cliente" class="headerlink" title="Cliente"></a>Cliente</h3><p>​A Smiles é um dos maiores programas de fidelidade do Brasil, com 16 milhões de participantes em março de 2019. Criado há 25 anos como programa de relacionamento da Varig, foi posteriormente adquirido pela GOL e em 2013 se tornou uma empresa independente, com a captação de R$ 1,1 bilhão com oferta pública inicial (IPO).<br>​<br>O programa de fidelidade é conhecido pela inovação e pioneirismo com o lançamento produtos e serviços lançados desde 2013, como Clube Smiles, Viaje Fácil e Conta Família. A companhia também tem a maior validade de milhas do mercado, que vão de 3 a 10 anos, de acordo com a categoria do cliente.<br>​</p>
<h3 id="Desafio"><a href="#Desafio" class="headerlink" title="Desafio"></a>Desafio</h3><p>O escopo do projeto foi a criação de um sistema de controle de alterações em produção com aprovações simples e rápido, contemplando os requisitos abaixo:</p>
<ol>
<li>Infra as Code.</li>
<li>Immutable Configuration.</li>
<li>Serverless</li>
<li>Slack como interface.<br>​<br>O projeto foi muito interessante por se tratar de integrações com produtos de mensageria e utilização de solução serverless.<br>​<h3 id="Solucao"><a href="#Solucao" class="headerlink" title="Solução"></a>Solução</h3>​O provisionamento da infra-estrutura foi desenvolvido com AWS CloudFormation.<br>O API Gateway foi desenvolvido usando OpenAPI 3.0.<br>Os Lambdas foram desenvolvidos em Python, o que facilitaria a integração com o Slack.</li>
</ol>
<p>Todos os scripts de deploy, já desenvolvidos e instalados no <a href="https://www.rundeck.com/open-source" target="_blank" rel="noopener">Rundeck</a>, foram alterados para receber o novo step de autorização de execução, que aguarda a confirmação ou negativa da execução feita pelo Slack. Veja abaixo um exemplo de mensagem:</p>
<img src="/2020/07/06/Deploy_Checker/Aprovado.png">

<img src="/2020/07/06/Deploy_Checker/Deny.png">

<h3 id="Resultados"><a href="#Resultados" class="headerlink" title="Resultados"></a>Resultados</h3><p>Com a entrega deste projeto, nenhuma execução em produção é feita sem a aprovação de uma das pessoas autorizadas no canal do Slack, trazendo maior controle com custo extremamente baixo.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.enkel.com.br/2020/07/06/Deploy_Checker/" data-id="ckojekucw00001iq1ppspuq61" class="article-share-link">Compartilhar</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Case-Study/">Case Study</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Smiles/">Smiles</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Smiles_OSB" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/28/Smiles_OSB/" class="article-date">
  <time datetime="2019-08-28T16:58:57.000Z" itemprop="datePublished">2019-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/28/Smiles_OSB/">Smiles - Infrastructure as Code usando AWS + Oracle Service Bus</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​<br>Nós ajudamos a <a href="https://www.smiles.com.br" target="_blank" rel="noopener">Smiles</a> a automatizar todo o processo de gerenciamento da infraestrutura dos seus <a href="https://www.oracle.com/middleware/technologies/service-bus.html" target="_blank" rel="noopener">OSB</a> usando <a href="https://www.Chef.io/" target="_blank" rel="noopener">Chef</a> com <a href="https://aws.amazon.com/opsworks/" target="_blank" rel="noopener">AWS OpsWorks</a> e <a href="https://aws.amazon.com/cloudformation/" target="_blank" rel="noopener">AWS CloudFormation</a>.<br>​</p>
<h3 id="Cliente"><a href="#Cliente" class="headerlink" title="Cliente"></a>Cliente</h3><p>​A Smiles é um dos maiores programas de fidelidade do Brasil, com 16 milhões de participantes em março de 2019. Criado há 25 anos como programa de relacionamento da Varig, foi posteriormente adquirido pela GOL e em 2013 se tornou uma empresa independente, com a captação de R$ 1,1 bilhão com oferta pública inicial (IPO).<br>​<br>O programa de fidelidade é conhecido pela inovação e pioneirismo com o lançamento produtos e serviços lançados desde 2013, como Clube Smiles, Viaje Fácil e Conta Família. A companhia também tem a maior validade de milhas do mercado, que vão de 3 a 10 anos, de acordo com a categoria do cliente.<br>​</p>
<h3 id="Desafio"><a href="#Desafio" class="headerlink" title="Desafio"></a>Desafio</h3><p>O escopo do projeto foi a migração de versão do produto Oracle Service Bus(OSB) para a versão 12.2.1.3, contemplando os requisitos abaixo:</p>
<ol>
<li>Infra as Code.</li>
<li>Immutable Configuration.</li>
<li>Auto Scaling em momento de maior troughput.</li>
<li>Job no Rundeck para a criação do ambiente, onde qualquer analista de infra poderia lançar um ambiente.<br>​</li>
</ol>
<p>O projeto foi desafiador devido à complexidade do produto e de precisarmos de um processo 100% automático, onde não poderiam ter intervenções humanas uma vez que o job no Rundeck fosse executado.<br>​</p>
<h3 id="Solucao"><a href="#Solucao" class="headerlink" title="Solução"></a>Solução</h3><p>​O provisionamento da infra-estrutura foi desenvolvido com AWS CloudFormation.<br>A instalação e configuração do dominio OSB, foi efetuado via Chef, utilizando scripts WSLT como apoio.<br>O domínio OSB foi configurado utilizando Dynamic Cluster, para que fosse possivel fazer o auto scaling de forma dinamica e sem intervenção humana.<br>​<br>Utilizamos as seguintes ferramentas para atender os requisitos:</p>
<ol>
<li>Chef:<ul>
<li>Recipes</li>
<li>Roles</li>
<li>Data bag</li>
<li>Environment<br>​</li>
</ul>
</li>
<li>WLST:<ul>
<li>Dominio</li>
<li>Data Sources</li>
<li>JMS</li>
<li>Adapters</li>
<li>Realm</li>
<li>Coherence<br>​</li>
</ul>
<ol start="3">
<li>Rundeck</li>
</ol>
<ul>
<li>Jobs em Bash (automação da execução de CloudFormation)</li>
</ul>
</li>
</ol>
<ol start="4">
<li>AWS:<ul>
<li>OpsWorks</li>
<li>CloudFormation</li>
<li>EC2</li>
<li>Auto Scaling Group</li>
<li>Application Load Balancer</li>
<li>Route53</li>
<li>IAM</li>
</ul>
</li>
</ol>
<img src="/2019/08/28/Smiles_OSB/osb.svg">

<h3 id="Resultados"><a href="#Resultados" class="headerlink" title="Resultados"></a>Resultados</h3><p>Com a entrega deste projeto, toda a infra-estrutura de OSB agora é gerenciada via código, tendo benefícios como:</p>
<ul>
<li>Redução no tempo de provisionamento de ambientes</li>
<li>Garantia de equalidade na configuração entre os ambientes</li>
<li>Auto-scaling para garantir resiliência em produção</li>
<li>Eliminação de falhas humanas no processo de provisionamento de ambientes</li>
<li>Redução de gastos com recursos humanos no provisionamento de ambientes</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.enkel.com.br/2019/08/28/Smiles_OSB/" data-id="ckojekud200011iq1fe4zcgo2" class="article-share-link">Compartilhar</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Case-Study/">Case Study</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Smiles/">Smiles</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Welcome" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/28/Welcome/" class="article-date">
  <time datetime="2019-08-28T11:54:28.000Z" itemprop="datePublished">2019-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/28/Welcome/">Hello, world!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A Enkel (<a href="https://enkel.com.br" target="_blank" rel="noopener">https://enkel.com.br</a>) é uma consultoria focada em serviços de cloud, devops, apm, AI e afins.</p>
<p>Liderada por profissionais com mais de 15 anos de mercado, trabalhando com os sistemas críticos das maiores empresas do Brasil e com o propósito de criar uma BULLETPROOF IT, a Enkel se insere no mercado trazendo inovação, comprometimento e conhecimento. Com uma visão 360, desde a arquitetura, passando por desenvolvimento até o suporte, se especializa em trazer soluções personalizadas e viáveis para cada cenário.</p>
<p>Entre em contato: <a href="mailto:contato@enkel.com.br" target="_blank" rel="noopener">contato@enkel.com.br</a></p>
<p><img src="/images/logo_vertical_preto_big.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.enkel.com.br/2019/08/28/Welcome/" data-id="ckojekuda00031iq1cvmv5tvp" class="article-share-link">Compartilhar</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Enkel/">Enkel</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Case-Study/">Case Study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Enkel/">Enkel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Smiles/">Smiles</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuvem de Tags</h3>
    <div class="widget tagcloud">
      <a href="/tags/Case-Study/" style="font-size: 20px;">Case Study</a> <a href="/tags/Enkel/" style="font-size: 10px;">Enkel</a> <a href="/tags/Smiles/" style="font-size: 20px;">Smiles</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Arquivos</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">julho 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">agosto 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Postagens Recentes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/06/Deploy_Checker/">Smiles - Controlando os deploy em produção com AWS e Slack</a>
          </li>
        
          <li>
            <a href="/2019/08/28/Smiles_OSB/">Smiles - Infrastructure as Code usando AWS + Oracle Service Bus</a>
          </li>
        
          <li>
            <a href="/2019/08/28/Welcome/">Hello, world!</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Enkel<br>
      Desenvolvido por <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>